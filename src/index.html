<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WATCHOUT Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>    <div class="app-container">
        <main class="app-main">
            <div class="main-content">                <!-- Left Sidebar -->
                <aside class="sidebar">                    <div class="sidebar-header">
                        <div class="sidebar-title-group">
                            <h3>Servers</h3>
                            <div class="server-count-sidebar" id="serverCountSidebar">0</div>
                        </div>
                        <div class="sidebar-buttons">
                            <button id="scanButton" class="scan-button-sidebar">
                                <img src="../assets/refresh.svg" class="button-icon" alt="Refresh">
                            </button>
                            <button id="clearOfflineButton" class="clear-offline-button-sidebar" title="Clear offline cached servers">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="sidebar-scan-status">
                        <div class="scan-status" id="scanStatus">Background scanning every 30 seconds...</div>
                    </div>
                    <div class="sidebar-content">
                        <div class="server-list" id="serverList">
                            <div class="no-servers-sidebar" id="noServersSidebar">
                                <div class="no-servers-icon-sidebar">üì°</div>
                                <p>No servers found</p>
                            </div>
                        </div>
                    </div>
                </aside>                <!-- Main Content Area -->
                <div class="content-area">
                    <!-- Main Panels -->
                    <div class="main-panels">
                        <!-- Server Details Panel -->
                        <div class="panel" id="detailsPanel">                            <div class="panel-header">
                                <div class="panel-title-group">
                                    <span class="panel-icon">üìã</span>
                                    <h3>Server Details</h3>
                                </div>
                            </div><div class="panel-content" id="serversContainer">
                                <div class="no-servers" id="noServers">
                                    <div class="no-servers-icon">üì°</div>
                                    <p>No Watchout servers discovered yet</p>
                                    <p class="hint">Click "Manual Scan" to begin discovery</p>
                                </div>
                                <div class="no-selection" id="noSelection" style="display: none;">
                                    <div class="no-selection-icon">üëà</div>
                                    <p>Select a server from the sidebar to view details</p>
                                </div>
                            </div>
                        </div>

                        <!-- Server Commands Panel -->
                        <div class="panel" id="commandsPanel">
                            <div class="panel-header">
                                <div class="panel-title-group">
                                    <span class="panel-icon">‚ö°</span>
                                    <h3>Server Commands</h3>
                                </div>
                                <div class="connection-status" id="connectionStatus">
                                    <span class="status-indicator" id="apiStatusIndicator"></span>
                                    <span id="apiStatusText">Not connected</span>
                                </div>
                            </div>
                            
                            <div class="panel-content" id="commandsContainer">
                                    <div class="no-server-selected" id="noServerSelected">
                                        <div class="no-server-icon">üñ•Ô∏è</div>
                                        <p>Select a server to send commands</p>
                                        <p class="hint">Choose a server from the sidebar first</p>
                                    </div>

                                    <div class="commands-area" id="commandsArea" style="display: none;">                                        <div class="command-categories">
                                            <!-- Timeline Control Commands -->
                                            <div class="command-category">
                                                <h3>Timeline Control</h3>
                                                
                                                <!-- Timeline Selection -->
                                                <div class="timeline-selection">
                                                    <div class="timeline-selector-group">
                                                        <label for="timelineSelector">Select Timeline:</label>
                                                        <select id="timelineSelector" class="timeline-selector" disabled>
                                                            <option value="">Load timelines first...</option>
                                                        </select>
                                                        <button class="command-btn refresh-btn" id="timelinesBtn" title="Load Available Timelines">
                                                            <span class="cmd-icon">üìë</span>
                                                            <span>Refresh</span>
                                                        </button>
                                                    </div>                                                    <div class="timeline-info" id="timelineInfo" style="display: none;">
                                                        <div class="timeline-list-header">Available Timelines:</div>
                                                        <div class="timeline-list" id="timelineList">
                                                            <div class="timeline-list-item">No timelines loaded</div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Control Buttons -->
                                                <div class="command-buttons">
                                                    <button class="command-btn play-btn" id="playBtn" disabled title="Select a timeline first">
                                                        <span class="cmd-icon">
                                                            <img src="../assets/play-solid.svg" alt="Play" class="timeline-icon">
                                                        </span>
                                                        <span>Play</span>
                                                    </button>
                                                    <button class="command-btn pause-btn" id="pauseBtn" disabled title="Select a timeline first">
                                                        <span class="cmd-icon">
                                                            <img src="../assets/pause-solid.svg" alt="Pause" class="timeline-icon">
                                                        </span>
                                                        <span>Pause</span>
                                                    </button>
                                                    <button class="command-btn stop-btn" id="stopBtn" disabled title="Select a timeline first">
                                                        <span class="cmd-icon">
                                                            <img src="../assets/stop-solid.svg" alt="Stop" class="timeline-icon">
                                                        </span>
                                                        <span>Stop</span>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Information Commands -->
                                            <div class="command-category">
                                                <h3>Information</h3>
                                                <div class="command-buttons">
                                                    <button class="command-btn info-btn" id="statusBtn">
                                                        <span class="cmd-icon">üìä</span>
                                                        <span>Get Status</span>
                                                    </button>
                                                    <button class="command-btn info-btn" id="showBtn">
                                                        <span class="cmd-icon">üé≠</span>
                                                        <span>Get Show Info</span>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Advanced Commands -->
                                            <div class="command-category">
                                                <h3>Advanced</h3>
                                                <div class="command-buttons">
                                                    <button class="command-btn advanced-btn" id="testConnectionBtn">
                                                        <span class="cmd-icon">üîó</span>
                                                        <span>Test Connection</span>
                                                    </button>
                                                    <button class="command-btn advanced-btn" id="customCommandBtn">
                                                        <span class="cmd-icon">‚öôÔ∏è</span>
                                                        <span>Custom Command</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Command Response Area -->
                                        <div class="command-response" id="commandResponse">
                                            <div class="response-header">
                                                <h4>Command Response</h4>
                                                <button class="clear-response-btn" id="clearResponseBtn">Clear</button>
                                            </div>
                                            <div class="response-content" id="responseContent">
                                                <div class="no-response">No commands executed yet</div>
                                            </div>
                                        </div>                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>        <footer class="app-footer">
            <div class="footer-content">
                <span>WATCHOUT Assistant v<span id="appVersion">1.0.0</span></span>
                <span class="separator">‚Ä¢</span>
                <span>Built with Electron</span>
                <button id="debugFooterBtn" style="background: orange; color: black; padding: 5px; margin: 0 10px; border: none; border-radius: 3px; cursor: pointer;">Debug Footer</button>
                <button id="settingsButton" class="settings-button" title="Application Settings">
                    ‚öôÔ∏è Settings
                </button>
            </div>
        </footer>
    </div>    <!-- Custom Command Modal -->
    <div class="modal-overlay" id="customCommandModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Custom Watchout Command</h3>
                <button class="modal-close" id="closeCustomModal">√ó</button>
            </div>            <div class="modal-body">
                <div class="form-group">
                    <label for="customEndpoint">API Endpoint:</label>
                    <div class="endpoint-input-group">
                        <input type="text" id="customEndpoint" placeholder="e.g., /v0/state or /v0/play/0" />
                        <select id="endpointExamples" class="endpoint-examples">
                            <option value="">-- Common Examples --</option>
                            <option value="/v0/state">Get Current Status</option>
                            <option value="/v0/timelines">Get Timelines</option>
                            <option value="/v0/play/0">Play Timeline 0</option>
                            <option value="/v0/pause/0">Pause Timeline 0</option>
                            <option value="/v0/stop/0">Stop Timeline 0</option>
                            <option value="/v0/jump-to-time/0?time=5000&state=play">Jump to 5 seconds</option>
                            <option value="/v0/cues/0">Get Timeline 0 Cues</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="customMethod">HTTP Method:</label>
                    <select id="customMethod">
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="customData">Request Data (JSON):</label>
                    <textarea id="customData" placeholder='{"key": "value"}' rows="4"></textarea>
                    <small class="form-help">Leave empty for GET requests. Use JSON format for POST/PUT requests.</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelCustomCommand">Cancel</button>
                <button class="btn-primary" id="executeCustomCommand">Execute</button>
            </div>
        </div>    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" id="closeSettingsModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Server Discovery</h4>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="enableCacheFromDisk" checked>
                            <span class="checkmark"></span>
                            Load server cache from disk
                        </label>
                        <small class="form-help">Save and load discovered servers between application sessions</small>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Web Server</h4>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="enableWebServer" checked>
                            <span class="checkmark"></span>
                            Enable web server (Port 3080)
                        </label>
                        <small class="form-help">Allow browser access to WATCHOUT Assistant at http://localhost:3080</small>
                    </div>
                    <div class="form-group" id="webServerStatusGroup">
                        <label>Web Server Status:</label>
                        <span id="webServerStatus" class="status-indicator-text">Unknown</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Application</h4>
                    <div class="form-group">
                        <label>Version:</label>
                        <span id="settingsVersion">1.0.0</span>
                    </div>
                    <div class="form-group">
                        <label>Cache File Location:</label>
                        <span id="cacheFileLocation" class="file-path">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelSettings">Cancel</button>
                <button class="btn-primary" id="saveSettings">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="api-adapter.js"></script>
    <script src="renderer.js"></script>
</body>
</html>
